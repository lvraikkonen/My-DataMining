install.packages('rJava')
library(tm)
install.packages("Rwordseg", repos="http://R-Forge.R-project.org", type="source")
library("rJava", lib.loc="C:/Users/v-shuolv/Documents/R/win-library/3.1")
Sys.getenv("JAVA_HOME")
library(rJava)
library(rJava)
library(tm)
library(Rwordseg)
library(RTextTools)
library(FSelector)
install.packages("Rwordseg", repos="http://R-Forge.R-project.org", type="source")
install.packages("Rwordseg", repos="http://R-Forge.R-project.org")
install.packages("~/Rwordseg_0.2-1.zip", repos = NULL)
library(tm)
library(Rwordseg)
library(RTextTools)
library(FSelector)
teststring1 <- "æˆ‘æ˜¯ä¸€ä¸ªä¿—äºº"
teststring1
segmentCN(teststring1)
segmentCN(c("`(Â¢3n", "Â˜g5Ãµa"))
teststring1 <- "æˆ‘æ²‰é»˜ä¸ä»£è¡¨æˆ‘ä¸ç—›æˆ‘ä¸ç—›çœ¼æ³ªå°±ä¸ä¼šæµæ€»æ˜¯å®‰é™æ‰¿å—å®‰é™å¿å—å®‰é™çœ‹ä½ èµ°ä½ è¯´æˆ‘å¾ˆé€‚åˆå½“æœ‹å‹"
segmentCN(teststring1)
library(Rwordseg)
teststring <- "é‡‡ç”¨ä¸¤ç§ç²’åº¦çš„æœç´¢ç²—ç²’åº¦å’Œç»†ç²’åº¦"
segmentCN(teststring)
set.seed(1)
rpois(5, 2)
a <- rpois(5, 2)
mode(a)
library(datasets)
Rprof()
fit <- lm(y ~ x1 + x2)
Rprof(NULL)
library(datasets)
Rprof()
fit <- lm(y ~ x1 + x2)
summaryRprof()
y <- rnorm(10)
download.file('https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2Fss06hid.csv')
?download.file
url <- 'https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2Fss06hid.csv'
destFile <- "./data.csv"
download.file(url,destFile,method="curl")
library(httr)
library(httpuv)
library(jsonlite)
?oauth_app
oauth_endpoints("twitter")
# 2. Register an application at https://github.com/settings/applications
# Insert your values below - if secret is omitted, it will look it up in the
# GITHUB_CONSUMER_SECRET environmental variable.  Use http://localhost:1410
# as the callback url
myapp <- oauth_app("ContentMining", "an3hwBQXNU7xwZmz3ISTHHryI", secret = " I5pMQT5Hlh7G3zHhIBmmTC2f0AKCrJKBem69eTygwpfRu9hNBj")
# 3. Get OAuth credentials
twitter_token <- oauth2.0_token(oauth_endpoints("twitter"), myapp)
oauth_endpoints("twitter")
myapp <- oauth_app("ContentMining", "an3hwBQXNU7xwZmz3ISTHHryI", secret = " I5pMQT5Hlh7G3zHhIBmmTC2f0AKCrJKBem69eTygwpfRu9hNBj")
twitter_token <- oauth2.0_token(oauth_endpoints("twitter"), myapp)
# 3. Get OAuth credentials
twitter_token <- oauth1.0_token(oauth_endpoints("twitter"), myapp)
myapp <- oauth_app("ContentMining", key = "an3hwBQXNU7xwZmz3ISTHHryI",
secret = " I5pMQT5Hlh7G3zHhIBmmTC2f0AKCrJKBem69eTygwpfRu9hNBj")
twitter_token <- oauth1.0_token(oauth_endpoints$twitter, myapp)
twitter_token <- oauth2.0_token(oauth_endpoints$twitter, myapp)
twitter_token <- oauth2.0_token(oauth_endpoints("twitter"), myapp)
# 3. Get OAuth credentials
twitter_token <- oauth1.0_token(oauth_endpoints("twitter"), myapp)
myapp <- oauth_app("ContentMining", key = "an3hwBQXNU7xwZmz3ISTHHryI",
secret = "I5pMQT5Hlh7G3zHhIBmmTC2f0AKCrJKBem69eTygwpfRu9hNBj")
twitter_token <- oauth1.0_token(oauth_endpoints("twitter"), myapp)
twitter_token <- oauth2.0_token(oauth_endpoints("twitter"), myapp)
twitter_token <- oauth2.0_token(oauth_endpoints("twitter"), myapp)
req <- GET("https://api.twitter.com/1.1/statuses/home_timeline.json",
config(token = twitter_token))
req <- GET("https://api.twitter.com/1.1/statuses/home_timeline.json",
config(token = twitter_token))
req <- GET("https://api.twitter.com/1.1/statuses/home_timeline.json",
config(token = twitter_token))
stop_for_status(req)
content(req)
?GET
install.packages("twitteR")
library(twitteR)
api_key <- "an3hwBQXNU7xwZmz3ISTHHryI"
api_secret <- "I5pMQT5Hlh7G3zHhIBmmTC2f0AKCrJKBem69eTygwpfRu9hNBj"
access_token <- "174593932-saf9FxbAiAW1KwSHoYrubL1yuT4Or6Q9OvIc8Ppt"
access_token_secret <- "AA0ft0RJLbZz5mColacJZ37imPDp7pt6nS55AJNg"
setup_twitter_oauth(api_key,api_secret,access_token,access_token_secret)
?setup_twitter_oauth
?searchTwitter
mh370 <- searchTwitter("#PrayForMH370", since = "2014-03-08", until = "2014-03-20", n = 1000)
myapp <- oauth_app("ContentMining", key = "an3hwBQXNU7xwZmz3ISTHHryI",
secret = "I5pMQT5Hlh7G3zHhIBmmTC2f0AKCrJKBem69eTygwpfRu9hNBj")
# 3. Get OAuth credentials
twitter_token <- oauth2.0_token(oauth_endpoints("twitter"), myapp)
mh370 <- searchTwitter("#PrayForMH370", since = "2014-03-08", until = "2014-03-20", n = 1000)
ï¼Ÿtm
?tm
library("tm", lib.loc="C:/Users/v-shuolv/Documents/R/win-library/3.1")
library(Rwordseg)
teststring1 <- "æˆ–æ˜¯å½“äº‹äººåœ¨ç¬¬ä¸€æ—¶é—´å‡ºæ¥è¾Ÿè°£ï¼Œå·²è¿œè¿œä¸èƒ½æ»¡è¶³å¦‚ä»Šç½‘ç»œä¿¡æ¯ä¼ æ’­çš„é€Ÿåº¦ï¼Œè€Œè™šå‡çš„ä¿¡æ¯å¾€å¾€ç»™æ”¿åºœã€ä¼ä¸šã€åŠçŸ¥åäººå£«å¸¦æ¥è´Ÿé¢çš„å½±å“ï¼Œå¦‚é‡‘åº¸åŽ»ä¸–ï¼Œåˆ°è¿‘æœŸæ‰€è°“é“è§‚éŸ³è¿·é­‚æŠ¢åŠ«å¼•å‘ç½‘æ°‘ææ…Œ.Âœ"
segmentCN(teststring1)
library(tm)
library(Rwordseg)
library(RTextTools)
library(FSelector)
Infor.sweet <- read.csv("Data/sweetsong.csv", header = TRUE)
Infor.sad <- read.csv("Data/sadsong.csv", header = TRUE)
View(Infor.sweet)
removeEnglish <- function(x) {
gsub("[a-z]+|[A-Z]+", "", x)
}
a <- removeEnglish("asfasfasdfæˆ‘æ˜¯æ±‰è¯­")
a
b <- removeEnglish("asfasfasdfæˆ‘æ˜¯aæ±‰è¯­")
b
?segmentCn
?segmentCN
s <- Infor.sweet$lyric
s
word_s <- lapply(Infor.sweet$lyric,removeEnglish)
class(word_s)
head(word_s)
Infor.sweet <- read.csv("Data/sweetsong.csv",encoding="UTF-8",  header = TRUE)
Infor.sad <- read.csv("Data/sadsong.csv",encoding="UTF-8",  header = TRUE)
word_s <- lapply(Infor.sweet$lyric,removeEnglish)
head(word_s)
word_s <- lapply(word_s,segmentCN)
head(word_s)
# å½¢æˆcorpus
song.sad.corpus <- corpus(song.sad)
song.sweet.corpus <- corpus(song.sweet)
# åˆæˆç”œèœœå’Œä¼¤æ„Ÿçš„è¯­æ–™åº“
song.corpus <- c(song.sad.corpus, song.sweet.corpus)
?Corpus
makeCorpus <- function(str1, str2) {
# ä¼¤æ„Ÿæ­Œæ›²åˆ†è¯ ç»„æˆè¯­æ–™åº“
word.sad <- lapply(str1, removeEnglish)
word.sad <- lapply(word.sad, segmentCN)
corpus.sad <- Corpus(VectorSource(word.sad))
# ç”œèœœæ­Œæ›²åˆ†è¯ ç»„æˆè¯­æ–™åº“
word.sweet <- lapply(str2, removeEnglish)
word.sweet <- lapply(word.sweet, segmentCN)
corpus.sweet <- Corpus(VectorSource(word.sweet))
# åˆæˆé¢„æ–™åº“
corpus <- c(corpus.sad, corpus.sweet)
return(corpus)
}
# å½¢æˆcorpus
song.sad.corpus <- corpus(song.sad)
song.sweet.corpus <- corpus(song.sweet)
# åˆæˆç”œèœœå’Œä¼¤æ„Ÿçš„è¯­æ–™åº“
song.corpus <- c(song.sad.corpus, song.sweet.corpus)
corpus <- makeCorpus(Infor.sweet$lyric, Infor.sad$lyric)
str(corpus)
dtm <- function(corpus, tfidf = FALSE) {
## è¯»å–åœæ­¢è¯
mystopwords <- readLines("material/stopwords.txt")
if (tfidf == TRUE) {
## æ–‡æ¡£-è¯çŸ©é˜µ è¯çš„é•¿åº¦å¤§äºŽ1å°±çº³å…¥çŸ©é˜µ
cor.dtm <- DocumentTermMatrix(corpus, control = list(wordLengths = c(2,
Inf), stopwords = mystopwords, weighting = weightTfIdf))
} else {
cor.dtm <- DocumentTermMatrix(corpus, control = list(wordLengths = c(2,
Inf), stopwords = mystopwords))
}
## åŽ»æŽ‰ç¨€ç–çŸ©é˜µä¸­ä½Žé¢‘çŽ‡çš„è¯
cor.dtm <- removeSparseTerms(cor.dtm, 0.98)
## ä½¿å¾—æ¯ä¸€è¡Œè‡³å°‘æœ‰ä¸€ä¸ªè¯ä¸ä¸º0 rowTotals <- apply(cor.dtm, 1, sum) cor.dtm <-
## cor.dtm[rowTotals > 0]
return(cor.dtm)
}
dtm <- function(corpus, tfidf = FALSE) {
## è¯»å–åœæ­¢è¯
mystopwords <- readLines("Data/stopwords.txt")
if (tfidf == TRUE) {
## æ–‡æ¡£-è¯çŸ©é˜µ è¯çš„é•¿åº¦å¤§äºŽ1å°±çº³å…¥çŸ©é˜µ
cor.dtm <- DocumentTermMatrix(corpus, control = list(wordLengths = c(2,
Inf), stopwords = mystopwords, weighting = weightTfIdf))
} else {
cor.dtm <- DocumentTermMatrix(corpus, control = list(wordLengths = c(2,
Inf), stopwords = mystopwords))
}
## åŽ»æŽ‰ç¨€ç–çŸ©é˜µä¸­ä½Žé¢‘çŽ‡çš„è¯
cor.dtm <- removeSparseTerms(cor.dtm, 0.98)
## ä½¿å¾—æ¯ä¸€è¡Œè‡³å°‘æœ‰ä¸€ä¸ªè¯ä¸ä¸º0 rowTotals <- apply(cor.dtm, 1, sum) cor.dtm <-
## cor.dtm[rowTotals > 0]
return(cor.dtm)
}
corpus.dtm <- dtm(corpus)
corpus.dtm.tfidf <- dtm(corpus, tfidf = TRUE)
song.sweet.wordcloud <- wordCloud(corpus.dtm.tfidf)
install.packages('wordcloud')
library(wordcloud)
song.sweet.wordcloud <- wordCloud(corpus.dtm.tfidf)
?wordcloud
song.sweet.wordcloud <- wordcloud(corpus.dtm.tfidf)
corpus.dtm.tfidf
corpus.dtm
inspect(corpus.dtm)
inspect(corpus.dtm.tfidf)
song.sweet.wordcloud <- wordcloud(corpus.dtm.tfidf)
m <- as.matrix(corpus.dtm.tfidf)
v <- sort(rowSums(m),decreasing=TRUE)
m
d <- data.frame(word = names(v),freq=v)
d
head(d)
wordcloud(d$word,d$freq)
